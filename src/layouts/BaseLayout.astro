---
// src/layouts/BaseLayout.astro
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import BackToTop from '../components/BackToTop.astro'

export interface Props {
  title?: string
  description?: string
}

const { title = 'y3say', description } = Astro.props
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="æ´‹å±±èŠ‹" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description || 'y3sayçš„ä¸ªäººåšå®¢'} />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <title>{title}</title>
    
    <script is:inline>
      ;(function () {
        const html = document.documentElement;
        const getResolvedTheme = () => {
          const stored = localStorage.getItem('theme');
          const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          if (!stored || stored === 'auto') return systemDark ? 'dark' : 'light';
          return stored;
        };
        const updateTheme = () => {
          const theme = getResolvedTheme();
          html.classList.toggle('dark', theme === 'dark');
        };
        updateTheme();
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
          localStorage.removeItem('theme'); 
          updateTheme();
        });
      })()
    </script>
  </head>

  <body class="font-sans text-gray-7 dark:text-gray-2 bg-white dark:bg-black transition-colors duration-500 relative min-h-screen flex flex-col items-center">
    
    <Header />

    <main class="flex-1 w-full max-w-1440px px-7 md:px-15 box-border pb-10">
      <slot />
    </main>

    <Footer />
    <BackToTop />

    <style is:global>
      /* ğŸ”‘ è§£å†³é—ªçƒçš„ç¥å™¨ï¼šå¼ºåˆ¶ä¿ç•™æ»šåŠ¨æ¡å ä½ */
      html {
        scrollbar-gutter: stable;
      }

      /* å½“ ImageGallery æ¿€æ´»æ—¶ï¼Œé˜²æ­¢åº•å±‚æ»šåŠ¨ */
      body.overflow-hidden {
        overflow: hidden;
      }
    </style>
  </body>
</html>