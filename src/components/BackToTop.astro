---
// BackToTop.astro
---

<button id="to-top-trigger" class="round-btn" title="ÂõûÈ°∂">
  <div class="i-ri-arrow-up-line"></div>
</button>

<script>
  function initBackToTop() {
    const btn = document.getElementById('to-top-trigger');
    if (!btn) return;

    btn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
    window.addEventListener('scroll', () => {
      const show = window.scrollY > 300;
      btn.classList.toggle('show', show);
    }, { passive: true });
  }

  document.addEventListener('astro:page-load', initBackToTop);
  initBackToTop();
</script>

<style>
  :root {
    --spring-ease: cubic-bezier(0.5, 1.7, 0.3, 0.8);
    --btn-size: 44px;
    --glass-bg: rgba(255, 255, 255, 0.25);
    --glass-border: rgba(255, 255, 255, 0.4);
    --text-color: #1d1d1f;
  }

  :global(.dark) {
    --glass-bg: rgba(20, 20, 22, 0.45);
    --glass-border: rgba(255, 255, 255, 0.1);
    --text-color: #f5f5f7;
  }

  .round-btn {
    position: fixed;
    /* üîë ÂØπÈΩê md:px-15 (3.75rem) */
    right: 3.75rem; 
    bottom: 1.5rem;
    z-index: 10000;
    width: var(--btn-size);
    height: var(--btn-size);
    border-radius: 50%;
    background: var(--glass-bg);
    backdrop-filter: blur(40px) saturate(210%);
    -webkit-backdrop-filter: blur(40px) saturate(210%);
    border: 0.5px solid var(--glass-border);
    color: var(--text-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
    transform: translateY(100px);
    opacity: 0;
    pointer-events: none;
    transition: transform 0.6s var(--spring-ease), opacity 0.4s ease, background 0.2s ease;
  }

  .round-btn.show {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
  }

  .round-btn:active { transform: scale(0.85); }

  /* üîë ÈÄÇÈÖç UnoCSS px-7 (1.75rem) */
  @media (max-width: 768px) {
    :root { --btn-size: 40px; }
    .round-btn {
      right: 1.75rem;
      bottom: 1.2rem;
    }
  }
</style>