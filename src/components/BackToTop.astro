---
import LiquidGlassBase from './LiquidGlassBase.vue';
---

<div id="to-top-trigger" class="backtop-wrapper">
  <LiquidGlassBase client:load toggleOnClick={false}>
    <div class="icon-container">
      <div class="i-ri-arrow-up-line"></div>
    </div>
  </LiquidGlassBase>
</div>

<script>
  function initBackToTop() {
    const root = document.getElementById('to-top-trigger');
    if (!root) return;

    root.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

    window.addEventListener('scroll', () => {
      const show = window.scrollY > 300;
      root.style.transform = show ? 'translateY(0)' : 'translateY(100px)';
      root.style.opacity = show ? '1' : '0';
      root.style.pointerEvents = show ? 'auto' : 'none';
    }, { passive: true });
  }

  document.addEventListener('astro:page-load', initBackToTop);
  initBackToTop();
</script>

<style>
  .backtop-wrapper {
    position: fixed;
    right: 3.75rem;
    bottom: 1.5rem;
    z-index: 10000;
    opacity: 0;
    transform: translateY(100px);
    transition: all 0.6s cubic-bezier(0.5, 1.7, 0.3, 0.8);
  }

  .icon-container {
    display: flex;
    font-size: 1.4rem;
    color: #1d1d1f;
  }

  :global(.dark) .icon-container {
    color: #f5f5f7;
  }

  @media (max-width: 768px) {
    .backtop-wrapper {
      right: 1.75rem;
      bottom: 1.2rem;
    }
  }
</style>